##
## Makefile for elfsh
##
## Started on  Sun Mar 10 01:19:24 2002 jfv
## Last update Sun Dec 15 01:55:43 2002 jfv
##

include ../config.h

SRC	= got_hijack.c
CC	= gcc
RM	= rm -f
VULN	= hijacked.c

OBJ64	= $(SRC:.c=.64.o)
CFLAGS64  =$(shell eresi-config64 libelfsh --cflags)
LDFLAGS64 =$(shell eresi-config64 libelfsh --libs)
NAME64	= got_hijacker64

all: all64

all64: $(OBJ64)
	$(CC) $(OBJ64) -o $(NAME64) $(LDFLAGS64)
	$(CC) -m64 $(VULN) -o hijackme64

fclean: clean
	$(RM) $(NAME32) $(NAME64) hijackme* fake_aout*

clean:
	$(RM) $(OBJ32) $(OBJ64) *~

%.64.o:	%.c
	$(CC) -c $< -o $@ $(CFLAGS64) -g
